{"ast":null,"code":"import axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { getAppointmentsForDay, getInterviewersForDay } from \"helpers/selectors\";\nexport default function useApplicationData() {\n  const [state, setState] = useState({\n    day: \"Monday\",\n    days: [],\n    appointments: {},\n    interviewers: {}\n  });\n  const dailyAppointments = getAppointmentsForDay(state, state.day);\n  const interviewers = getInterviewersForDay(state, state.day);\n\n  const setDay = day => setState({ ...state,\n    day\n  });\n\n  useEffect(() => {\n    const daysUrl = \"http://localhost:8001/api/days\";\n    const appointmentsUrl = \"http://localhost:8001/api/appointments\";\n    const interviewersUrl = \"http://localhost:8001/api/interviewers\";\n    Promise.all([axios.get(daysUrl), axios.get(appointmentsUrl), axios.get(interviewersUrl)]).then(all => {\n      setState(prev => ({ ...prev,\n        days: all[0].data,\n        appointments: all[1].data,\n        interviewers: all[2].data\n      }));\n    });\n  }, []);\n\n  function bookInterview(id, interview) {\n    const appointment = { ...state.appointments[id],\n      interview: { ...interview\n      }\n    };\n    const appointments = { ...state.appointments,\n      [id]: appointment\n    };\n    setState({ ...state,\n      appointments\n    });\n    return axios.put(`http://localhost:8001/api/appointments/${id}`, {\n      interview\n    });\n  }\n\n  const cancelInterview = (id, interview) => {\n    return axios.delete(`http://localhost:8001/api/appointments/${id}`, {\n      data: interview\n    }).then(() => {\n      const appointment = { ...state.appointments[id],\n        interview: null\n      };\n      const appointments = { ...state.appointments,\n        [id]: appointment\n      };\n      setState({ ...state,\n        appointments\n      });\n    }).catch(error => {\n      setState({ ...state,\n        error: error.message\n      });\n      throw error;\n    });\n  };\n\n  return {\n    state,\n    setDay,\n    bookInterview,\n    cancelInterview,\n    dailyAppointments,\n    interviewers\n  };\n}","map":{"version":3,"names":["axios","useState","useEffect","getAppointmentsForDay","getInterviewersForDay","useApplicationData","state","setState","day","days","appointments","interviewers","dailyAppointments","setDay","daysUrl","appointmentsUrl","interviewersUrl","Promise","all","get","then","prev","data","bookInterview","id","interview","appointment","put","cancelInterview","delete","catch","error","message"],"sources":["/Users/megwilken/lighthouse/scheduler2/src/hooks/useApplicationData.js"],"sourcesContent":["import axios from \"axios\";\n\nimport { useState, useEffect } from \"react\";\n\n\n\nimport {\n  getAppointmentsForDay,\n  getInterviewersForDay,\n} from \"helpers/selectors\";\n\nexport default function useApplicationData() {\n  const [state, setState] = useState({\n    day: \"Monday\",\n    days: [],\n    appointments: {},\n    interviewers: {},\n  });\n\n  const dailyAppointments = getAppointmentsForDay(state, state.day);\n  const interviewers = getInterviewersForDay(state, state.day);\n\n  const setDay = (day) => setState({ ...state, day });\n\n  useEffect(() => {\n    const daysUrl = \"http://localhost:8001/api/days\";\n    const appointmentsUrl = \"http://localhost:8001/api/appointments\";\n    const interviewersUrl = \"http://localhost:8001/api/interviewers\";\n    Promise.all([\n      axios.get(daysUrl),\n      axios.get(appointmentsUrl),\n      axios.get(interviewersUrl),\n    ]).then((all) => {\n      setState((prev) => ({\n        ...prev,\n        days: all[0].data,\n        appointments: all[1].data,\n        interviewers: all[2].data,\n      }));\n    });\n  }, []);\n\n  function bookInterview(id, interview) {\n    const appointment = {\n      ...state.appointments[id],\n      interview: { ...interview },\n    };\n    const appointments = {\n      ...state.appointments,\n      [id]: appointment,\n    };\n    setState({ ...state, appointments });\n    return axios.put(\n      `http://localhost:8001/api/appointments/${id}`,\n      { interview }\n    );\n  }\n\n  const cancelInterview = (id, interview) => {\n    return axios\n      .delete(`http://localhost:8001/api/appointments/${id}`, { data: interview })\n      .then(() => {\n        const appointment = {\n          ...state.appointments[id],\n          interview: null,\n        };\n        const appointments = {\n          ...state.appointments,\n          [id]: appointment,\n        };\n        setState({ ...state, appointments });\n      })\n      .catch((error) => {\n        setState({ ...state, error: error.message });\n        throw error;\n      });\n  };\n\n  return { state, setDay, bookInterview, cancelInterview, dailyAppointments, interviewers };\n}\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAIA,SACEC,qBADF,EAEEC,qBAFF,QAGO,mBAHP;AAKA,eAAe,SAASC,kBAAT,GAA8B;EAC3C,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC;IACjCO,GAAG,EAAE,QAD4B;IAEjCC,IAAI,EAAE,EAF2B;IAGjCC,YAAY,EAAE,EAHmB;IAIjCC,YAAY,EAAE;EAJmB,CAAD,CAAlC;EAOA,MAAMC,iBAAiB,GAAGT,qBAAqB,CAACG,KAAD,EAAQA,KAAK,CAACE,GAAd,CAA/C;EACA,MAAMG,YAAY,GAAGP,qBAAqB,CAACE,KAAD,EAAQA,KAAK,CAACE,GAAd,CAA1C;;EAEA,MAAMK,MAAM,GAAIL,GAAD,IAASD,QAAQ,CAAC,EAAE,GAAGD,KAAL;IAAYE;EAAZ,CAAD,CAAhC;;EAEAN,SAAS,CAAC,MAAM;IACd,MAAMY,OAAO,GAAG,gCAAhB;IACA,MAAMC,eAAe,GAAG,wCAAxB;IACA,MAAMC,eAAe,GAAG,wCAAxB;IACAC,OAAO,CAACC,GAAR,CAAY,CACVlB,KAAK,CAACmB,GAAN,CAAUL,OAAV,CADU,EAEVd,KAAK,CAACmB,GAAN,CAAUJ,eAAV,CAFU,EAGVf,KAAK,CAACmB,GAAN,CAAUH,eAAV,CAHU,CAAZ,EAIGI,IAJH,CAISF,GAAD,IAAS;MACfX,QAAQ,CAAEc,IAAD,KAAW,EAClB,GAAGA,IADe;QAElBZ,IAAI,EAAES,GAAG,CAAC,CAAD,CAAH,CAAOI,IAFK;QAGlBZ,YAAY,EAAEQ,GAAG,CAAC,CAAD,CAAH,CAAOI,IAHH;QAIlBX,YAAY,EAAEO,GAAG,CAAC,CAAD,CAAH,CAAOI;MAJH,CAAX,CAAD,CAAR;IAMD,CAXD;EAYD,CAhBQ,EAgBN,EAhBM,CAAT;;EAkBA,SAASC,aAAT,CAAuBC,EAAvB,EAA2BC,SAA3B,EAAsC;IACpC,MAAMC,WAAW,GAAG,EAClB,GAAGpB,KAAK,CAACI,YAAN,CAAmBc,EAAnB,CADe;MAElBC,SAAS,EAAE,EAAE,GAAGA;MAAL;IAFO,CAApB;IAIA,MAAMf,YAAY,GAAG,EACnB,GAAGJ,KAAK,CAACI,YADU;MAEnB,CAACc,EAAD,GAAME;IAFa,CAArB;IAIAnB,QAAQ,CAAC,EAAE,GAAGD,KAAL;MAAYI;IAAZ,CAAD,CAAR;IACA,OAAOV,KAAK,CAAC2B,GAAN,CACJ,0CAAyCH,EAAG,EADxC,EAEL;MAAEC;IAAF,CAFK,CAAP;EAID;;EAED,MAAMG,eAAe,GAAG,CAACJ,EAAD,EAAKC,SAAL,KAAmB;IACzC,OAAOzB,KAAK,CACT6B,MADI,CACI,0CAAyCL,EAAG,EADhD,EACmD;MAAEF,IAAI,EAAEG;IAAR,CADnD,EAEJL,IAFI,CAEC,MAAM;MACV,MAAMM,WAAW,GAAG,EAClB,GAAGpB,KAAK,CAACI,YAAN,CAAmBc,EAAnB,CADe;QAElBC,SAAS,EAAE;MAFO,CAApB;MAIA,MAAMf,YAAY,GAAG,EACnB,GAAGJ,KAAK,CAACI,YADU;QAEnB,CAACc,EAAD,GAAME;MAFa,CAArB;MAIAnB,QAAQ,CAAC,EAAE,GAAGD,KAAL;QAAYI;MAAZ,CAAD,CAAR;IACD,CAZI,EAaJoB,KAbI,CAaGC,KAAD,IAAW;MAChBxB,QAAQ,CAAC,EAAE,GAAGD,KAAL;QAAYyB,KAAK,EAAEA,KAAK,CAACC;MAAzB,CAAD,CAAR;MACA,MAAMD,KAAN;IACD,CAhBI,CAAP;EAiBD,CAlBD;;EAoBA,OAAO;IAAEzB,KAAF;IAASO,MAAT;IAAiBU,aAAjB;IAAgCK,eAAhC;IAAiDhB,iBAAjD;IAAoED;EAApE,CAAP;AACD"},"metadata":{},"sourceType":"module"}