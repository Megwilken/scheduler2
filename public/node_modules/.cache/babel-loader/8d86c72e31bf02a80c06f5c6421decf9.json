{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar generateRandomId = function () {\n  // generates a random 13 character string\n  return Math.random().toString(16).slice(2);\n};\n\nvar Channel =\n/** @class */\nfunction () {\n  function Channel(_a) {\n    var _b = _a === void 0 ? {} : _a,\n        transport = _b.transport,\n        _c = _b.async,\n        async = _c === void 0 ? false : _c;\n\n    var _this = this;\n\n    this.sender = generateRandomId();\n    this.events = {};\n    this.isAsync = async;\n\n    if (transport) {\n      this.transport = transport;\n      this.transport.setHandler(function (event) {\n        return _this.handleEvent(event);\n      });\n    }\n  }\n\n  Object.defineProperty(Channel.prototype, \"hasTransport\", {\n    get: function () {\n      return !!this.transport;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Channel.prototype.addListener = function (eventName, listener) {\n    this.events[eventName] = this.events[eventName] || [];\n    this.events[eventName].push(listener);\n  };\n\n  Channel.prototype.addPeerListener = function (eventName, listener) {\n    var peerListener = listener;\n    peerListener.ignorePeer = true;\n    this.addListener(eventName, peerListener);\n  };\n\n  Channel.prototype.emit = function (eventName) {\n    var _this = this;\n\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    var event = {\n      type: eventName,\n      args: args,\n      from: this.sender\n    };\n\n    var handler = function () {\n      if (_this.transport) {\n        _this.transport.send(event);\n      }\n\n      _this.handleEvent(event, true);\n    };\n\n    if (this.isAsync) {\n      // todo I'm not sure how to test this\n      setImmediate(handler);\n    } else {\n      handler();\n    }\n  };\n\n  Channel.prototype.eventNames = function () {\n    return Object.keys(this.events);\n  };\n\n  Channel.prototype.listenerCount = function (eventName) {\n    var listeners = this.listeners(eventName);\n    return listeners ? listeners.length : 0;\n  };\n\n  Channel.prototype.listeners = function (eventName) {\n    var listeners = this.events[eventName];\n    return listeners ? listeners : undefined;\n  };\n\n  Channel.prototype.once = function (eventName, listener) {\n    var onceListener = this.onceListener(eventName, listener);\n    this.addListener(eventName, onceListener);\n  };\n\n  Channel.prototype.removeAllListeners = function (eventName) {\n    if (!eventName) {\n      this.events = {};\n    } else if (this.events[eventName]) {\n      delete this.events[eventName];\n    }\n  };\n\n  Channel.prototype.removeListener = function (eventName, listener) {\n    var listeners = this.listeners(eventName);\n\n    if (listeners) {\n      this.events[eventName] = listeners.filter(function (l) {\n        return l !== listener;\n      });\n    }\n  };\n\n  Channel.prototype.on = function (eventName, listener) {\n    this.addListener(eventName, listener);\n  };\n\n  Channel.prototype.handleEvent = function (event, isPeer) {\n    if (isPeer === void 0) {\n      isPeer = false;\n    }\n\n    var listeners = this.listeners(event.type);\n\n    if (listeners && (isPeer || event.from !== this.sender)) {\n      listeners.forEach(function (fn) {\n        return !(isPeer && fn.ignorePeer) && fn.apply(void 0, event.args);\n      });\n    }\n  };\n\n  Channel.prototype.onceListener = function (eventName, listener) {\n    var _this = this;\n\n    var onceListener = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      _this.removeListener(eventName, onceListener);\n\n      return listener.apply(void 0, args);\n    };\n\n    return onceListener;\n  };\n\n  return Channel;\n}();\n\nexports.Channel = Channel;\nexports.default = Channel;","map":{"version":3,"names":["Object","defineProperty","exports","value","generateRandomId","Math","random","toString","slice","Channel","_a","_b","transport","_c","async","_this","sender","events","isAsync","setHandler","event","handleEvent","prototype","get","enumerable","configurable","addListener","eventName","listener","push","addPeerListener","peerListener","ignorePeer","emit","args","_i","arguments","length","type","from","handler","send","setImmediate","eventNames","keys","listenerCount","listeners","undefined","once","onceListener","removeAllListeners","removeListener","filter","l","on","isPeer","forEach","fn","apply","default"],"sources":["/Users/megwilken/lighthouse/scheduler2/node_modules/@storybook/channels/dist/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar generateRandomId = function () {\n    // generates a random 13 character string\n    return Math.random()\n        .toString(16)\n        .slice(2);\n};\nvar Channel = /** @class */ (function () {\n    function Channel(_a) {\n        var _b = _a === void 0 ? {} : _a, transport = _b.transport, _c = _b.async, async = _c === void 0 ? false : _c;\n        var _this = this;\n        this.sender = generateRandomId();\n        this.events = {};\n        this.isAsync = async;\n        if (transport) {\n            this.transport = transport;\n            this.transport.setHandler(function (event) { return _this.handleEvent(event); });\n        }\n    }\n    Object.defineProperty(Channel.prototype, \"hasTransport\", {\n        get: function () {\n            return !!this.transport;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Channel.prototype.addListener = function (eventName, listener) {\n        this.events[eventName] = this.events[eventName] || [];\n        this.events[eventName].push(listener);\n    };\n    Channel.prototype.addPeerListener = function (eventName, listener) {\n        var peerListener = listener;\n        peerListener.ignorePeer = true;\n        this.addListener(eventName, peerListener);\n    };\n    Channel.prototype.emit = function (eventName) {\n        var _this = this;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var event = { type: eventName, args: args, from: this.sender };\n        var handler = function () {\n            if (_this.transport) {\n                _this.transport.send(event);\n            }\n            _this.handleEvent(event, true);\n        };\n        if (this.isAsync) {\n            // todo I'm not sure how to test this\n            setImmediate(handler);\n        }\n        else {\n            handler();\n        }\n    };\n    Channel.prototype.eventNames = function () {\n        return Object.keys(this.events);\n    };\n    Channel.prototype.listenerCount = function (eventName) {\n        var listeners = this.listeners(eventName);\n        return listeners ? listeners.length : 0;\n    };\n    Channel.prototype.listeners = function (eventName) {\n        var listeners = this.events[eventName];\n        return listeners ? listeners : undefined;\n    };\n    Channel.prototype.once = function (eventName, listener) {\n        var onceListener = this.onceListener(eventName, listener);\n        this.addListener(eventName, onceListener);\n    };\n    Channel.prototype.removeAllListeners = function (eventName) {\n        if (!eventName) {\n            this.events = {};\n        }\n        else if (this.events[eventName]) {\n            delete this.events[eventName];\n        }\n    };\n    Channel.prototype.removeListener = function (eventName, listener) {\n        var listeners = this.listeners(eventName);\n        if (listeners) {\n            this.events[eventName] = listeners.filter(function (l) { return l !== listener; });\n        }\n    };\n    Channel.prototype.on = function (eventName, listener) {\n        this.addListener(eventName, listener);\n    };\n    Channel.prototype.handleEvent = function (event, isPeer) {\n        if (isPeer === void 0) { isPeer = false; }\n        var listeners = this.listeners(event.type);\n        if (listeners && (isPeer || event.from !== this.sender)) {\n            listeners.forEach(function (fn) { return !(isPeer && fn.ignorePeer) && fn.apply(void 0, event.args); });\n        }\n    };\n    Channel.prototype.onceListener = function (eventName, listener) {\n        var _this = this;\n        var onceListener = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            _this.removeListener(eventName, onceListener);\n            return listener.apply(void 0, args);\n        };\n        return onceListener;\n    };\n    return Channel;\n}());\nexports.Channel = Channel;\nexports.default = Channel;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}